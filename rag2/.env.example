# RAG2项目环境配置示例
# 复制此文件为.env并根据实际情况修改配置

# ================================
# 基础环境配置
# ================================

# 运行环境: development, production
RAG_ENV=development

# 调试模式
DEBUG=true

# ================================
# 模型配置 (Mac M1优化)
# ================================

# 计算设备: cpu, mps, cuda
MODEL_DEVICE=mps

# HuggingFace模型缓存目录
HF_HOME=/Users/$(whoami)/.cache/huggingface
TRANSFORMERS_CACHE=/Users/$(whoami)/.cache/transformers

# ================================
# LLM API配置
# ================================

# DeepSeek API (生产环境必需)
DEEPSEEK_API_KEY=your-deepseek-api-key-here
DEEPSEEK_API_BASE=https://api.deepseek.com/v1

# Ollama配置 (开发环境)
OLLAMA_API_BASE=http://localhost:11434/v1

# ================================
# API服务配置
# ================================

# API服务地址和端口
API_HOST=0.0.0.0
API_PORT=8000

# 开发模式配置
API_DEBUG=true
API_RELOAD=true
API_WORKERS=1

# 生产模式配置 (RAG_ENV=production时使用)
# API_DEBUG=false
# API_RELOAD=false
# API_WORKERS=4

# CORS配置
CORS_ORIGINS=["*"]

# ================================
# 数据库配置
# ================================

# PostgreSQL (向量数据库)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=rag2_db
POSTGRES_USER=rag2_user
POSTGRES_PASSWORD=rag2_password

# MySQL (对话历史)
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_DB=rag2_dialogue
MYSQL_USER=rag2_user
MYSQL_PASSWORD=rag2_password

# Redis (缓存)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=rag2_redis_password
REDIS_DB=0

# Elasticsearch (全文检索)
ES_HOST=localhost
ES_PORT=9200
ES_INDEX_PREFIX=rag2

# Neo4j (知识图谱)
NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=rag2_password

# ================================
# RAG系统配置
# ================================

# 检索配置
RETRIEVAL_TOP_K=10
RERANK_TOP_K=5
SIMILARITY_THRESHOLD=0.7

# 上下文配置
MAX_CONTEXT_LENGTH=4000
CHUNK_SIZE=512
CHUNK_OVERLAP=50

# 会话配置
MAX_CONVERSATION_TURNS=20
SESSION_TIMEOUT_HOURS=24

# 压缩配置
ENABLE_CONTEXT_COMPRESSION=true
COMPRESSION_RATIO=0.7

# 自适应RAG配置
ENABLE_ADAPTIVE_RAG=true
ENABLE_SELF_RAG=true
CONFIDENCE_THRESHOLD=0.8

# ================================
# 日志配置
# ================================

# 日志级别: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# 日志保留天数
LOG_RETENTION_DAYS=30

# 日志文件大小限制 (MB)
LOG_MAX_SIZE_MB=100

# ================================
# 性能配置
# ================================

# 批处理大小
BATCH_SIZE=32
DOCUMENT_BATCH_SIZE=5

# 连接池配置
DB_POOL_SIZE=20
DB_POOL_MIN_SIZE=5

# 缓存配置
CACHE_TTL_SECONDS=3600
QUERY_CACHE_SIZE=1000

# ================================
# 安全配置
# ================================

# JWT密钥 (如果启用认证)
# JWT_SECRET_KEY=your-jwt-secret-key
# JWT_ALGORITHM=HS256
# JWT_EXPIRE_MINUTES=30

# API限流配置
# RATE_LIMIT_PER_MINUTE=60
# RATE_LIMIT_BURST=10

# ================================
# 监控配置
# ================================

# 启用性能监控
ENABLE_METRICS=true

# 监控数据保留时间 (小时)
METRICS_RETENTION_HOURS=24

# 健康检查间隔 (秒)
HEALTH_CHECK_INTERVAL=30

# ================================
# 开发配置
# ================================

# 启用开发工具
ENABLE_DEV_TOOLS=true

# 自动重载
AUTO_RELOAD=true

# 详细错误信息
VERBOSE_ERRORS=true

# 测试模式
TEST_MODE=false

# ================================
# 文件路径配置
# ================================

# 数据目录
DATA_DIR=./data

# 文档目录
DOCUMENTS_DIR=./data/documents

# 日志目录
LOGS_DIR=./data/logs

# 临时文件目录
TEMP_DIR=./data/temp

# ================================
# Docker配置 (如果使用Docker部署)
# ================================

# Docker网络
# DOCKER_NETWORK=rag2_network

# 容器名前缀
# CONTAINER_PREFIX=rag2

# ================================
# 备份配置
# ================================

# 启用自动备份
# ENABLE_BACKUP=false

# 备份间隔 (小时)
# BACKUP_INTERVAL_HOURS=24

# 备份保留天数
# BACKUP_RETENTION_DAYS=7

# 备份存储路径
# BACKUP_PATH=./backups

# ================================
# 扩展配置
# ================================

# 启用插件系统
# ENABLE_PLUGINS=false

# 插件目录
# PLUGINS_DIR=./plugins

# 自定义配置文件
# CUSTOM_CONFIG_PATH=./config/custom.yaml
