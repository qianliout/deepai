我准备使用langchain和rag技术实现个人知识库的功能
    要求： 
    - 在deepai/rag目录下实现
    - 我的电脑是mac M1,使用gpu训练
    - 我需要通过这个项目学习整个 rag和langchain的相关 知识，所以这个项目的知识点应该尽量全面
    - 我使用通义百炼大模型平台提供的大模型底座
    - 我是一个新后，所以需要代码结构清晰，日志完善，注释完善
    - 代码中涉及数据结构或超参数的，最好使用pydantic库用来指明数据结构,如果是 tensor 格式，要写好 shape,
    - 要在注释中重点关注数据的流转
    - 提供的命令应该尽量简单：如： python main.py quick 快速测试
    - 如果需要用到数据库等其他工具，需要告诉我怎么使用 docker进行安装
    - 所有的配置 config.py 中统一配置管理

你的实现太全面，需要简化   
    - 只提供交互式问答的功能，不需要提供api的功能
    - 暂时只支持txt文本类型的知识
    - 只使用ChromaDB向量数据库，底层使用SQLite进行存储
    - 支持流式对话，且需要支持会话上下文保持功能
    - 知识文件存放本地，不考虑MinIO存储
    - 对话数据保存在redis,暂时不需要es,mysql等存储
    - 暂时不需要性能监控等额外功能
    - 我主要是想学习rag和大模型的知识，所以你的重点应放到rag和llm上
    - 不考虑兼容之前代码，删除无用的代码
    - 整理代码，使用结构更清晰，日志更完善
  
rag代码中还是有足的地方
    - 我的知识文件是中文，应该添加中文分词的相关功能，在做中文分词时提供两种分词方式，1：简单的手工分词，2：使用jieba分词器
    - 代码应该做前置检查，最好提供一个可以快速检查的命令：python main.py check
    在检查时不仅要检查配置是否存在，还应该检查配置是否正确，比如要检查配置的api_key是否能调通模型，提供的redis是否能连接通等等
    所以：项目中最好不要出现这样的代码,
        if not DASHSCOPE_AVAILABLE:
        if not self.api_key:
    - 查询扩展： _expand_query(self, query: str) 添加常同义词synonyms，不能手工维护
      - 可以使用：https://github.com/chatopera/Synonyms 这个库
    - 如果返回值是Dict[str, Any]类型的，请你定义成数据类的class
    - 上述所有的更改都不需要考虑对现有代码兼容